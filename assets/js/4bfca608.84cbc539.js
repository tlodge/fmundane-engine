"use strict";(self.webpackChunkfmundane_docs=self.webpackChunkfmundane_docs||[]).push([[268],{3905:(t,e,n)=>{n.d(e,{Zo:()=>p,kt:()=>c});var r=n(7294);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var s=r.createContext({}),d=function(t){var e=r.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):l(l({},e),t)),n},p=function(t){var e=d(t.components);return r.createElement(s.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return r.createElement(r.Fragment,{},e)}},m=r.forwardRef((function(t,e){var n=t.components,a=t.mdxType,o=t.originalType,s=t.parentName,p=i(t,["components","mdxType","originalType","parentName"]),m=d(n),c=a,f=m["".concat(s,".").concat(c)]||m[c]||u[c]||o;return n?r.createElement(f,l(l({ref:e},p),{},{components:n})):r.createElement(f,l({ref:e},p))}));function c(t,e){var n=arguments,a=e&&e.mdxType;if("string"==typeof t||a){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var s in e)hasOwnProperty.call(e,s)&&(i[s]=e[s]);i.originalType=t,i.mdxType="string"==typeof t?t:a,l[1]=i;for(var d=2;d<o;d++)l[d]=n[d];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6034:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var r=n(7462),a=(n(7294),n(3905));const o={sidebar_position:3},l="Dyson driver",i={unversionedId:"drivers/dyson",id:"drivers/dyson",title:"Dyson driver",description:"The dyson fan uses MQTT to communicate. It reads credentials in a (top-level) config.json file:",source:"@site/docs/drivers/dyson.md",sourceDirName:"drivers",slug:"/drivers/dyson",permalink:"/fmundane-engine/docs/drivers/dyson",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Screen driver",permalink:"/fmundane-engine/docs/drivers/screen"},next:{title:"Arm driver",permalink:"/fmundane-engine/docs/drivers/arm"}},s={},d=[],p={toc:d};function u(t){let{components:e,...n}=t;return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"dyson-driver"},"Dyson driver"),(0,a.kt)("p",null,"The dyson fan uses MQTT to communicate. It reads credentials in a (top-level) config.json file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"FAN\\_CONFIG.model,\n\nFAN\\_CONFIG.id,\n\nFAN\\_CONFIG.ip,\n\nFAN\\_CONFIG.username,\n\nFAN\\_CONFIG.password,\n\nFAN\\_CONFIG.clientid,\n\nFAN\\_CONFIG.MQTT\\_IP\n")),(0,a.kt)("p",null,"Unfortunately there is no easy way to get these credentials, other than just doing a wireguard packet sniff on the MQTT port. Full details on how to do this can be found in the README.md of this driver. Once running, the (node) server accepts the following:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"th"},"endpoint")),(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"th"},"method")),(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"th"},"description")),(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"th"},"params")))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"/ui/api/data","_","read"),(0,a.kt)("td",{parentName:"tr",align:null},"GET"),(0,a.kt)("td",{parentName:"tr",align:null},"Poll in the air quality stats from the fan every 5 seconds."),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"/ui/api/data","_","stop"),(0,a.kt)("td",{parentName:"tr",align:null},"GET"),(0,a.kt)("td",{parentName:"tr",align:null},"Stop polling the fan every 5 seconds"),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"/ui/api/fan"),(0,a.kt)("td",{parentName:"tr",align:null},"GET"),(0,a.kt)("td",{parentName:"tr",align:null},"Control the fan"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("strong",{parentName:"td"},"subject"),": ",(0,a.kt)("ul",null,(0,a.kt)("li",null,(0,a.kt)("strong",{parentName:"td"},"on"),": true or false (i.e turn the fan on or off) ")," ",(0,a.kt)("li",null,(0,a.kt)("strong",{parentName:"td"},"power"),": set the fan power (i.e. how strength of airflow) from 1 to 9"),(0,a.kt)("li",null,(0,a.kt)("strong",{parentName:"td"},"rotate")),(0,a.kt)("li",null,(0,a.kt)("strong",{parentName:"td"},"from, to")," set rotation"),(0,a.kt)("li",null,(0,a.kt)("strong",{parentName:"td"},"from"),": degrees"),(0,a.kt)("li",null,(0,a.kt)("strong",{parentName:"td"},"to"),": degrees, eg:?rotate=true&from=0&to=90"),(0,a.kt)("li",null,(0,a.kt)("strong",{parentName:"td"},"cool")," set fan to cooling"),(0,a.kt)("li",null,(0,a.kt)("strong",{parentName:"td"},"heat"),": set fan to heating")))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"/api/arm/status"),(0,a.kt)("td",{parentName:"tr",align:null},"GET"),(0,a.kt)("td",{parentName:"tr",align:null},"Return status information on the drawer and the door."),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"/api/arm/toggledoor"),(0,a.kt)("td",{parentName:"tr",align:null},"GET"),(0,a.kt)("td",{parentName:"tr",align:null},"Open / close the door"),(0,a.kt)("td",{parentName:"tr",align:null})))))}u.isMDXComponent=!0}}]);