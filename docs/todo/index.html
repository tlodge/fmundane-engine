<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-todo">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Future work, fixes and improvements | Future Mundane Caravan</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://tlodge.github.io/fmundane-engine/docs/todo"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Future work, fixes and improvements | Future Mundane Caravan"><meta data-rh="true" name="description" content="This is a list of all of the things that could be improved given time."><meta data-rh="true" property="og:description" content="This is a list of all of the things that could be improved given time."><link data-rh="true" rel="icon" href="/fmundane-engine/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tlodge.github.io/fmundane-engine/docs/todo"><link data-rh="true" rel="alternate" href="https://tlodge.github.io/fmundane-engine/docs/todo" hreflang="en"><link data-rh="true" rel="alternate" href="https://tlodge.github.io/fmundane-engine/docs/todo" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/fmundane-engine/blog/rss.xml" title="Future Mundane Caravan RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/fmundane-engine/blog/atom.xml" title="Future Mundane Caravan Atom Feed"><link rel="stylesheet" href="/fmundane-engine/assets/css/styles.c8cfa761.css">
<link rel="preload" href="/fmundane-engine/assets/js/runtime~main.87073ab7.js" as="script">
<link rel="preload" href="/fmundane-engine/assets/js/main.403f0574.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/fmundane-engine/"><div class="navbar__logo"><img src="/fmundane-engine/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/fmundane-engine/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">The Future Mundane Caravan</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/fmundane-engine/docs/intro">Overview</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/fmundane-engine/docs/category/caravan-drivers">Drivers</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/fmundane-engine/docs/category/troubleshooting">Troubleshooting</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/fmundane-engine/docs/category/twine">Authoring using Twine</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tlodge/fmundane-engine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fmundane-engine/docs/intro">Caravan Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fmundane-engine/docs/experience">Creating Experiences</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/fmundane-engine/docs/category/caravan-drivers">Caravan Drivers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Caravan Drivers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fmundane-engine/docs/startup">Caravan startup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fmundane-engine/docs/webapps">Future mundane webapps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fmundane-engine/docs/running">Running code</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/fmundane-engine/docs/category/troubleshooting">Troubleshooting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/fmundane-engine/docs/category/twine">Twine</a><button aria-label="Toggle the collapsible sidebar category &#x27;Twine&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/fmundane-engine/docs/todo">Future work, fixes and improvements</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/fmundane-engine/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Future work, fixes and improvements</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Future work, fixes and improvements</h1><p>This is a list of all of the things that could be improved given time.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="in-the-caravan">In the caravan<a class="hash-link" href="#in-the-caravan" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="caravan-network">Caravan network<a class="hash-link" href="#caravan-network" title="Direct link to heading">​</a></h3><p>We have seen the local caravan network struggle with bandwidth. In areas where there is lots of interference the system slows right down. We have found, for example, having the go-pro on the network is one device too far. We have also found that when the apple mac (speech machine) is on the wireless network it can take a very long time for the speech commands to be transmitted to the mac, which throws out the timings of the experience. This is why the mac is now wired to the router <strong>. At some point it may be worth looking to upgrade to a more performant router if the issues persist.</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-arm--drawer--door">The arm / drawer / door<a class="hash-link" href="#the-arm--drawer--door" title="Direct link to heading">​</a></h3><p>This has consistently been problematic. Here is a list of issues and how they might be fixed.</p><ul><li>Button press does not open the door</li></ul><p>We still see this from time to time, but we have found that once it works it continues to work. When it doesn&#x27;t work, the working theory is that it&#x27;s due to signal interference. We need to look at switching the door directly. Alternatively the new laser cutter control board that runs the motor that opens and closes the door has another motor output which could be used with another stepper motor that opens and closes the door (i.e. get rid of the current cupboard door opening system altogether). This would probably be much more reliable.</p><ul><li>The arm sometimes doesn&#x27;t work</li></ul><p>As already mentioned, in the interests of getting the arm to work before a deployment we had to write a hack to get round a race condition problem. When the Lenovo boots up, it assigns addresses to the devices connected to its USB ports. However (probably dependent on what device it discovers first), it sometimes gives the arm address /dev/ttyUSB0 and at other times it gives it /dev/ttyUSB1. I&#x27;m not entirely convinced that it won&#x27;t use numbers higher than this too. The fix has just been to write the robot arm commands to both outputs in parallel, so that it will work for the one that is connected and be disregarded by the other. Clearly this is not ideal. Instead the system should interrogate the port info, find out which one the arm is connected to and use that. Should be easy enough using a few linux system commands. Another option is to try and query the arm on various ports and if you get a response on one then you know it is the correct port. I briefly tried sending a serial command that should get a response, i.e: <code>(&quot;#1 QT\r&quot;)</code>, but wasn&#x27;t able to get one.</p><ul><li>Drawer sometimes gets confused whether it&#x27;s open or closed.</li></ul><p>The stepper motor that opens and closes the drawer is controlled using GCODE. Sometimes the stepper motor thinks that it is in one position (i.e. closed) when it is actually in the other. This tends to happen if the system is powered off when the drawer is open, for example. Need to obtain system feedback to make sure that the driver and the controller and motor remain in sync (which will mean having a wire from the NANO Tx to the NodeMCU Rx)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-mundane-software-woz-engine-drivers">Future mundane software (WoZ, engine, drivers)<a class="hash-link" href="#future-mundane-software-woz-engine-drivers" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="code-tidy">Code tidy<a class="hash-link" href="#code-tidy" title="Direct link to heading">​</a></h3><p>There is a bunch of refactoring that could be done and basic tidying of the code – it has more or less developed as the project has so is overdue a first refactor.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="woz-and-moving-between-states">WoZ and moving between states<a class="hash-link" href="#woz-and-moving-between-states" title="Direct link to heading">​</a></h3><p>In general, the WoZ interface will only show a button for moving to a next state once all actions have completed. Actions are seen as completed once a request to an endpoint returns. There is one exception, video/media, which runs in the browser and there is currently no neat way for the browser to feed back to the engine that the video has finished. We&#x27;d need to make it work by having the engine call the /play endpoint, the /play endpoint tell the browser to play a video, and then wait until the browser says the video is finished before returning. But having a long running query like this feels wrong, so some other notification system might be better.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="error-reporting">Error reporting<a class="hash-link" href="#error-reporting" title="Direct link to heading">​</a></h3><p>By default all drivers should be written with a /status endpoint that can be interrogated by the WoZ as a way of providing status updates and troubleshooting. The arm driver has this support but other drivers need it. Would also be good to stream the logs from /var/log/ooi to the WoZ for easy realtime debugging/feedback.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hue-lights">Hue lights<a class="hash-link" href="#hue-lights" title="Direct link to heading">​</a></h3><p>Currently the lights API offers colour changes. It would be nice to have some higher level api calls that do things such as &#x27;flicker&#x27;, &#x27;flash&#x27;, &#x27;fade up&#x27; – should be quite easy to add these in!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nanoleaf-lights">Nanoleaf lights<a class="hash-link" href="#nanoleaf-lights" title="Direct link to heading">​</a></h3><p>These sit under the caravan seats on the floor. They don&#x27;t quite sync in colour with the hue lights. Double check the code that sets the colours and see if the formula is correct.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="woz-interface">WoZ interface<a class="hash-link" href="#woz-interface" title="Direct link to heading">​</a></h3><p>Lots of improvements could be made here. The motion between nodes is a little clunky. There need to be an option to manage the experiences that are available. There should be a standard &#x27;testing&#x27; panel that allows a user to manually test all devices in the caravan.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-mundane-authoring-environment">Future mundane authoring environment<a class="hash-link" href="#future-mundane-authoring-environment" title="Direct link to heading">​</a></h2><p>As noted – this is a modified version of Twine. Twine is great for some things, but it is still not a brilliant experience creating new experiences. A couple of things would hugely improve the authoring process.</p><ul><li>Better timing support</li></ul><p>Twine is great for creating the branching paths, but we have found that a significant amount of authoring effort goes into coordinating times, making sure for example that the voice speaks at the right time when media is playing or that the lights change colour in sync with playing media and so on and so forth. Ideally what we want is an interface within each node (or in twine parlance – passage) that looks more like an audio/video editing track, i.e. where it&#x27;s easy to click markers on a timeline to set when events need to happen.</p><ul><li>Simulated run throughs</li></ul><p>There is currently no easy way to test an experience properly outside the caravan. Usually the thing that needs to be tested is the timing and the interplay between sensors. It would be great (and a really nice project) to write a Twine story-format that does this. In essence, once a user has created a bunch of passages they&#x27;d click on &#x27;play&#x27; and all of the device actions would be simulated alongside the WoZ interface.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/fmundane-engine/docs/twine/mods"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Modifications to core Twine</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#in-the-caravan" class="table-of-contents__link toc-highlight">In the caravan</a><ul><li><a href="#caravan-network" class="table-of-contents__link toc-highlight">Caravan network</a></li><li><a href="#the-arm--drawer--door" class="table-of-contents__link toc-highlight">The arm / drawer / door</a></li></ul></li><li><a href="#future-mundane-software-woz-engine-drivers" class="table-of-contents__link toc-highlight">Future mundane software (WoZ, engine, drivers)</a><ul><li><a href="#code-tidy" class="table-of-contents__link toc-highlight">Code tidy</a></li><li><a href="#woz-and-moving-between-states" class="table-of-contents__link toc-highlight">WoZ and moving between states</a></li><li><a href="#error-reporting" class="table-of-contents__link toc-highlight">Error reporting</a></li><li><a href="#hue-lights" class="table-of-contents__link toc-highlight">Hue lights</a></li><li><a href="#nanoleaf-lights" class="table-of-contents__link toc-highlight">Nanoleaf lights</a></li><li><a href="#woz-interface" class="table-of-contents__link toc-highlight">WoZ interface</a></li></ul></li><li><a href="#future-mundane-authoring-environment" class="table-of-contents__link toc-highlight">Future mundane authoring environment</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Future Mundane. Built with Docusaurus.</div></div></div></footer></div>
<script src="/fmundane-engine/assets/js/runtime~main.87073ab7.js"></script>
<script src="/fmundane-engine/assets/js/main.403f0574.js"></script>
</body>
</html>